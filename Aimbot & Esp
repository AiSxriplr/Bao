local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local mouse = LocalPlayer:GetMouse()
local camera = game.Workspace.CurrentCamera

local aimbotEnabled = true -- Set to false to disable aimbot
local maxDistance = 100 -- Maximum distance for aimbot targeting

-- Function to find the closest player
local function getClosestPlayer()
    local closestPlayer = nil
    local shortestDistance = maxDistance
    local mousePosition = mouse.Hit.p

    for _, player in pairs(Players:GetPlayers()) do
        if player.Character and player ~= LocalPlayer then
            local character = player.Character
            local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
            
            if humanoidRootPart then
                local distance = (camera.CFrame.p - humanoidRootPart.Position).Magnitude
                
                if distance < shortestDistance then
                    shortestDistance = distance
                    closestPlayer = player
                end
            end
        end
    end

    return closestPlayer
end

-- Function to aim at the closest player
local function aimbot()
    if not aimbotEnabled then return end
    
    local closestPlayer = getClosestPlayer()
    if closestPlayer and closestPlayer.Character then
        local character = closestPlayer.Character
        local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
        
        if humanoidRootPart then
            local aimPosition = humanoidRootPart.Position
            local direction = (aimPosition - camera.CFrame.p).unit
            camera.CFrame = CFrame.new(camera.CFrame.p, aimPosition)
        end
    end
end

-- Update every frame
game:GetService("RunService").RenderStepped:Connect(function()
    if aimbotEnabled then
        aimbot()
    end
end)
